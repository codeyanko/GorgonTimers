<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Gorgon Timers</title>
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #2f2f2f;
  color: #eee;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 0;
  padding: 40px;
  min-height: 100vh;
}

.version {
  position: absolute;
  top: 10px;
  right: 15px;
  color: #aaa;
  font-size: 14px;
}

h1 {
  margin-bottom: 20px;
  font-weight: 600;
  color: #fff;
}

.add-timer {
  display: flex;
  gap: 10px;
  margin-bottom: 30px;
  flex-wrap: wrap;
  justify-content: center;
  align-items: flex-end;
}

.input-group {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.input-group label {
  margin-bottom: 5px;
  font-size: 14px;
  font-weight: 500;
  color: #ccc;
}

.input-group input,
.input-group select {
  padding: 10px;
  font-size: 14px;
  border: 1px solid #555;
  border-radius: 4px;
  background: #1e1e1e;
  color: #eee;
  box-sizing: border-box;
}

.input-group input#nameInput {
  width: 180px;
}

.input-group input[type="number"] {
  width: 90px;
}

/* Icon picker */
.icon-picker {
  position: relative;
}

#iconButton {
  font-size: 23px;
  text-align: center;
  width: 60px;
  height: 40px;
  border: 1px solid #555;
  border-radius: 4px;
  background: #1e1e1e;
  color: #eee;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

#iconGrid {
  display: none;
  position: absolute;
  top: 80px;
  left: 0;
  width: 240px;
  background: #1e1e1e;
  border: 1px solid #555;
  border-radius: 6px;
  padding: 6px;
  grid-template-columns: repeat(6, 1fr);
  gap: 4px;
  z-index: 10;
}

#iconGrid span {
  font-size: 22px;
  text-align: center;
  cursor: pointer;
  padding: 6px 0;
}

#iconGrid span:hover {
  background: #444;
  border-radius: 4px;
}

.input-group input[type="checkbox"] {
  width: 40px;
  height: 40px;
  margin: 0;
}

#autoRestart {
  transform: scale(1);
  display: block;
  margin: 0 auto;
}

.add-timer button {
  padding: 10px 20px;
  font-size: 14px;
  border: none;
  background-color: #007bff;
  color: white;
  border-radius: 4px;
  cursor: pointer;
  height: 42px;
  align-self: flex-end;
}

.add-timer button:hover {
  background-color: #0056b3;
}

#timers {
  width: 750px;
  max-width: 95%;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-bottom: 5px;
}

.timer-header,
.timer {
  display: grid;
  grid-template-columns: 0.6fr 1fr 1fr 1fr 1fr;
  justify-items: center;
  align-items: center;
  padding: 10px 15px;
  width: 100%;
}

.timer-header {
  font-weight: 600;
  background-color: #444;
  border-radius: 6px 6px 0 0;
  margin-bottom: 5px;
  color: #fff;
}

.timer {
  width: 100%;
  padding: 8px 0;
  font-size: 16px;
}

.timer-icon {
  font-size: 26px;
}

.timer-initial {
  color: #aaa;
}

/* Buttons */
.timer button {
  background-color: #b8860b;
  color: #fff;
  font-weight: 600;
  border: 2px solid #000;
  padding: 5px 10px;
  margin-left: 5px;
  border-radius: 4px;
  cursor: pointer;
}

.delete-btn {
  background-color: #b22222 !important;
  color: #fff;
  font-weight: 600;
  border: 2px solid #000;
}

.timer button:hover,
.delete-btn:hover {
  opacity: 0.85;
}

/* Row colors */
.timer.even {
  background-color: #3a3a3a;
}

.timer.odd {
  background-color: #333;
}

/* Finished timers */
.finished.even {
  background-color: #6b8e23;
}

.finished.odd {
  background-color: #5a7320;
}

/* Remove number input arrows */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}
</style>
</head>
<body>
<div class="version">Made by Topo. Version 1.0</div>
<h1>Gorgon Timers</h1>

<div class="add-timer">
  <div class="input-group icon-picker">
    <label>Icon</label>
    <button id="iconButton">‚è∞</button>
    <div id="iconGrid"></div>
  </div>
  <div class="input-group">
    <label for="nameInput">Name</label>
    <input type="text" id="nameInput" placeholder="Timer Name">
  </div>
  <div class="input-group">
    <label for="daysInput">Days</label>
    <input type="number" id="daysInput" placeholder="0" min="0">
  </div>
  <div class="input-group">
    <label for="hoursInput">Hours</label>
    <input type="number" id="hoursInput" placeholder="0" min="0">
  </div>
  <div class="input-group">
    <label for="minutesInput">Minutes</label>
    <input type="number" id="minutesInput" placeholder="0" min="0">
  </div>
  <div class="input-group">
    <label for="secondsInput">Seconds</label>
    <input type="number" id="secondsInput" placeholder="0" min="0" max="59">
  </div>
  <div class="input-group">
    <label for="autoRestart">Auto Restart</label>
    <input type="checkbox" id="autoRestart">
  </div>
  <button onclick="addTimer()">Add Timer</button>
</div>

<div id="nameError" style="color:#ff5555; font-size:18px; height:10px; margin-bottom:33px; margin-top:-15px; font-weight:bold; text-align:center;"></div>

<div id="timers">
  <div class="timer-header">
    <div>Icon</div>
    <div>Name</div>
    <div>Initial Time</div>
    <div>Remaining</div>
    <div>Actions</div>
  </div>
</div>

<script>
const ICONS = [
  "‚è∞","üöÄ","üöï","üåè","üåë","üåî","üåï","üåô","üåõ","üåü","üå¥","üåµ","üåª","üçÑ","üçñ","üéÉ","üéÑ","üé®","üè†","üèÜ","üêå",
  "üêé","üêî","üêô","üêû","üêù","üêü","üê¢","üê£","üê≠","üê∏","üëΩ","üëæ","üíé","üíå","üíã","üíô","üíö","üíõ","üíú","üíß",
  "üí™","üí∞","üíø","üìå","üíæ","üìí","üìï","üìó","üìò","üìô","üî•","üî¥","üîµ","üî∂","üî∑","üîπ","üòà","üòé","ü§¨","üöÅ",
  "üöõ","üåù","üåú","üå≤","üçã","üêÆ","üö©"
];

const iconGrid = document.getElementById('iconGrid');
const iconButton = document.getElementById('iconButton');

ICONS.forEach(icon => {
  const span = document.createElement('span');
  span.textContent = icon;
  span.onclick = () => {
    iconButton.textContent = icon;
    iconGrid.style.display = 'none';
  };
  iconGrid.appendChild(span);
});

iconButton.onclick = e => {
  e.stopPropagation();
  iconGrid.style.display = iconGrid.style.display === 'grid' ? 'none' : 'grid';
};
document.addEventListener('click', () => iconGrid.style.display = 'none');

let timers = [];

if (localStorage.getItem('timers')) {
  timers = JSON.parse(localStorage.getItem('timers'));
  timers.forEach(timer => timer.end = new Date(timer.end));
}

function saveTimers() {
  localStorage.setItem('timers', JSON.stringify(timers));
}

function addTimer() {
  const icon = iconButton.textContent;
  const name = document.getElementById('nameInput').value.trim();
  const days = +document.getElementById('daysInput').value || 0;
  const hours = +document.getElementById('hoursInput').value || 0;
  const minutes = +document.getElementById('minutesInput').value || 0;
  const seconds = +document.getElementById('secondsInput').value || 0;
  const autoRestart = document.getElementById('autoRestart').checked;
  const nameError = document.getElementById('nameError');

  if (!name || (days === 0 && hours === 0 && minutes === 0 && seconds === 0)) return;

  if (timers.some(t => t.name.toLowerCase() === name.toLowerCase())) {
    nameError.textContent = "A timer with this name already exists";
    setTimeout(() => nameError.textContent = "", 2500);
    return;
  }

  const duration = (days * 86400000) + (hours * 3600000) + (minutes * 60000) + (seconds * 1000);
  timers.push({
    icon,
    name,
    autoRestart,
    duration,
    originalDuration: duration,
    end: new Date(Date.now() + duration)
  });

  saveTimers();
  renderTimers();
}

function deleteTimer(index) {
  timers.splice(index, 1);
  saveTimers();
  renderTimers();
}

function restartTimer(index) {
  timers[index].end = new Date(Date.now() + timers[index].originalDuration);
  saveTimers();
  renderTimers();
}

function formatTime(ms) {
  if (ms < 0) ms = 0;
  const seconds = Math.floor(ms / 1000);
  const days = Math.floor(seconds / 86400);
  const hours = Math.floor((seconds % 86400) / 3600);
  const minutes = Math.floor((seconds % 3600) / 60);
  const secs = seconds % 60;

  const parts = [];
  if (days > 0) parts.push(`${days}d`);
  if (hours > 0 || days > 0) parts.push(`${hours.toString().padStart(2, '0')}h`);
  if (minutes > 0 || hours > 0 || days > 0) parts.push(`${minutes.toString().padStart(2, '0')}m`);
  parts.push(`${secs.toString().padStart(2, '0')}s`);
  return parts.join(' ');
}

function updateTimers() {
  const now = new Date();
  timers.forEach(timer => {
    if (timer.autoRestart && timer.end - now <= 0) {
      timer.end = new Date(now.getTime() + timer.originalDuration);
    }
  });
  saveTimers();
}

function renderTimers() {
  updateTimers();
  const container = document.getElementById('timers');
  container.innerHTML = `
    <div class="timer-header">
      <div>Icon</div>
      <div>Name</div>
      <div>Initial Time</div>
      <div>Remaining</div>
      <div>Actions</div>
    </div>
  `;

  timers.forEach((timer, index) => {
    const remaining = timer.end - new Date();
    const rowClass = remaining <= 0 ? `finished ${index % 2 === 0 ? 'even' : 'odd'}` : (index % 2 === 0 ? 'even' : 'odd');

    const row = document.createElement('div');
    row.className = `timer ${rowClass}`;
    row.innerHTML = `
      <div class="timer-icon">${timer.icon || ''}</div>
      <div>${timer.name}</div>
      <div class="timer-initial">${formatTime(timer.originalDuration)}</div>
      <div>${formatTime(remaining)}</div>
      <div>
        <button onclick="restartTimer(${index})">Restart</button>
        <button class="delete-btn" onclick="deleteTimer(${index})">Delete</button>
      </div>
    `;
    container.appendChild(row);
  });
}

setInterval(renderTimers, 1000);
renderTimers();
</script>
</body>
</html>
